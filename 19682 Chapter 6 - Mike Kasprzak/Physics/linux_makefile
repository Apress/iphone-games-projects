# - ------------------------------------------------------------------------ - #
TARGET				:=	output/PhysicsTest
# - ------------------------------------------------------------------------ - #
DEFINES				:=	-DSDL_BUILD -DLINUX_BUILD
INCLUDES			:=	-ISource
# - ------------------------------------------------------------------------ - #
LIBRARIES			:=	`sdl-config --cflags --libs` -lGL -lGLU 
# - ------------------------------------------------------------------------ - #
CODE_FILES			:=	game.c UnixTime.c GLGraphics.c SDLMain.c BallData.c
H_FILES				:=	game.h UnixTime.h Graphics.h
# - ------------------------------------------------------------------------ - #
CODE_FILES			:=	$(addprefix Source/,$(CODE_FILES))
H_FILES				:=	$(addprefix Source/,$(H_FILES))
.O_FILES			:=	$(addprefix obj/,$(addsuffix .o,$(CODE_FILES)))
# - ------------------------------------------------------------------------ - #

# - ------------------------------------------------------------------------ - #
$(TARGET): makedirs $(H_FILES) $(.O_FILES)
	g++ $(DEFINES) $(INCLUDES) $(.O_FILES) -o $@ $(LIBRARIES)
# - ------------------------------------------------------------------------ - #

# - ------------------------------------------------------------------------ - #
run: $(TARGET)
	./$(TARGET)
# - ------------------------------------------------------------------------ - #
clean:
	-rm $(.O_FILES) $(.O_FILES:.o=.o.d)
# - ------------------------------------------------------------------------ - #
makedirs:
	mkdir -p $(sort $(dir $(.O_FILES))) output
# - ------------------------------------------------------------------------ - #
phony: run clean makedirs
# - ------------------------------------------------------------------------ - #

# - ------------------------------------------------------------------------ - #
obj/%.c.o: %.c
	gcc $(DEFINES) $(INCLUDES) -MMD -MF $@.d -c $< -o $@
# - ------------------------------------------------------------------------ - #
obj/%.cpp.o: %.cpp
	g++ $(DEFINES) $(INCLUDES) -MMD -MF $@.d -c $< -o $@
# - ------------------------------------------------------------------------ - #


# - ------------------------------------------------------------------------ - #
-include $(.O_FILES:.o=.o.d)
# - ------------------------------------------------------------------------ - #
	